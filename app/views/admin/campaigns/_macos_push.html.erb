<div class="col-12 my-auto">
  <div>
    Mac OS:
  </div>
  <div class="push-macos">
    <div class="chrome-logo">
      <%= image_tag "chrome_logo.png", size: "38x38"%>
    </div>
    <div class="push-body">
      <div class="push-title">
        Notification Preview
      </div>
      <div class="push-website">
        <%=@shop.domain%>
      </div>
      <div id="mac-text" class="push-text">
        Preview your push notification
      </div>
    </div>
    <div class="app-logo">
      <%=image_tag @shop.manifest.icon, size: "58x58"%>
    </div>
  </div>
</div>

<div class="col-12 my-auto">
  <div>
    Windows:
  </div>
  <div class="push-windows">
    <div class="main">
      <div class="app-logo">
      <%=image_tag @shop.manifest.icon, size: "55x55"%>
      </div>
    <div class="push-body">
      <div class="push-title">
        Notification Preview
      </div>
      <div id="win-text" class="push-text">
        Preview your push notification
      </div>
      <div class="push-website mt-3">
        <%=@shop.domain%>
      </div>
    </div>
  </div>
</div>

<script>
  $("input, textarea").on('keyup change', function (){
          console.log($(this).val())
    if (this.id.includes("campaign_title")) {
      $('.push-title').html($(this).val())
    }
    if (this.id.includes("campaign_body")) {
      var m = $(this).val()
      if (m.length > 30) {
        m = m.slice(0, 30) + "..."
      }
      $('#mac-text').html(m)
      $('#win-text').html($(this).val().replace(/(.{30})/g, "$1<br>"))
    }
  });
</script>
